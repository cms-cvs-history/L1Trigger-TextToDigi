process TEST = 
{
	untracked PSet maxEvents = {untracked int32 input = 64}
#	untracked PSet maxEvents = {untracked int32 input = 2}

#include "Configuration/ReleaseValidation/data/Services.cff"
#    include "Configuration/StandardSequences/data/FakeConditions.cff"
#    untracked PSet options = {
#        include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
#        untracked bool makeTriggerResults = true
#    }

  source = EmptySource {}

include "FWCore/MessageService/data/MessageLogger.cfi"

include "SimCalorimetry/HcalTrigPrimProducers/data/hcaltpdigi.cff"

include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig.cff"

#include "Configuration/StandardSequences/data/Reconstruction.cff"
#include "Configuration/StandardSequences/data/Simulation.cff"
#include "Configuration/StandardSequences/data/MixingNoPileUp.cff" 
#include "Configuration/StandardSequences/data/VtxSmearedGauss.cff" 
include "L1Trigger/RegionalCaloTrigger/data/l1RctEmulDigis.cfi"
replace l1RctEmulDigis.ecalDigisLabel = rctInput
replace l1RctEmulDigis.hcalDigisLabel = rctInput
include "L1Trigger/RegionalCaloTrigger/data/L1RCTTestAnalyzer.cfi"
replace L1RCTTestAnalyzer.showRegionSums = false
#include "Configuration/StandardSequences/data/L1Emulator.cff"
include "L1TriggerConfig/L1ScalesProducers/data/L1CaloScalesConfig.cff"

    module rctInput = RctInputTextToDigi
    {
	FileInPath inputFile = "L1Trigger/TextToDigi/test/data/rctTestInputFileElec.txt"
    }

#    module rctSave = L1RCTSaveInput
#    {
#	untracked string rctTestInputFile = "rctSaveTest.txt"
#	bool useEcal = true
#	bool useHcal = true
#	InputTag ecalDigisLabel = ecalTriggerPrimitiveDigis
#	InputTag hcalDigisLabel = hcalTriggerPrimitiveDigis
#    }

    path input = {rctInput}
    path p = {l1RctEmulDigis, L1RCTTestAnalyzer}

   # Event output
include "Configuration/EventContent/data/EventContent.cff"
   module FEVT = PoolOutputModule 
   { 
     	using FEVTSIMEventContent
	untracked string fileName = "rctInputTest.root"
#    	untracked PSet dataset ={	
#        	untracked string dataTier = "GEN-SIM-DIGI-RECO"
#    		}
   }

   endpath outpath = {FEVT}


   schedule = {input,p,outpath}

}
